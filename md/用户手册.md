# MCP服务管理器用户手册

## 概述
MCP服务管理器是一个图形化界面应用程序，用于管理和监控MCP（Model Context Protocol）服务。通过本应用，您可以轻松添加、配置和查看各种MCP服务及其提供的工具。

## 系统要求
- **操作系统**: Windows 7及以上、macOS 10.12及以上、Linux主流发行版
- **内存**: 最少1GB可用内存
- **Java运行环境**: Java 11或更高版本
- **浏览器**: 现代浏览器（Chrome、Firefox、Safari、Edge等）

## 安装和启动

### 安装步骤
1. 确保系统已安装Java 11或更高版本
2. 下载MCP服务管理器应用程序包
3. 解压到目标目录

### 启动应用
#### Windows系统
双击运行 `run.bat` 文件

#### Linux/macOS系统
```bash
# 赋予执行权限
chmod +x run.sh

# 运行应用
./run.sh
```

### 访问应用
应用启动后，在浏览器中访问：`http://localhost:8080`

## 界面概览

### 主界面元素
1. **标题栏**: 显示应用名称"MCP服务管理"
2. **新增按钮**: 位于右上角，用于添加新的MCP服务
3. **服务卡片区**: 显示所有已配置的MCP服务
4. **状态栏**: 显示应用状态和操作反馈

### 服务卡片
每个服务以卡片形式展示，包含：
- 服务名称（标题）
- 服务类型（SSE/HTTP）
- 服务URL
- 超时时间
- 请求头信息（如有）

## 基本操作

### 添加MCP服务

#### 步骤1: 打开添加对话框
点击主界面右上角的"新增MCP服务"按钮

#### 步骤2: 选择输入方式
对话框提供两种输入方式：
- **表单输入**: 通过可视化表单填写服务信息
- **JSON输入**: 直接输入JSON格式的配置

#### 表单输入方式
1. **服务名称**: 输入服务的唯一标识名称
2. **服务类型**: 选择"SSE"或"HTTP"
3. **服务URL**: 输入MCP服务的完整URL地址
4. **高级配置**（可选）:
   - 点击"高级配置"展开更多选项
   - 设置超时时间（默认60秒）
   - 添加自定义请求头

#### JSON输入方式
直接输入完整的MCP服务配置JSON：
```json
{
  "name": "user info system",
  "type": "sse",
  "url": "http://127.0.0.1:10002/sse/",
  "timeout": 60,
  "headers": {
    "Authorization": "Bearer your-token-here"
  }
}
```

#### 步骤3: 测试连接（可选）
点击"测试连接"按钮验证服务配置是否正确

#### 步骤4: 保存服务
点击"确定"按钮保存配置，服务将显示在主界面

### 查看工具信息

#### 步骤1: 选择服务
在主界面找到要查看的服务卡片

#### 步骤2: 点击"查看工具"
点击服务卡片下方的"查看工具"按钮

#### 步骤3: 浏览工具列表
工具列表以表格形式展示：
- 工具名称
- 工具描述
- 操作按钮

#### 步骤4: 查看工具详情
点击工具行的"查看详情"按钮，查看：
- 工具完整名称
- 详细描述
- 输入参数格式（JSON Schema）
- 返回值格式

### 删除MCP服务

#### 步骤1: 选择服务
在主界面找到要删除的服务卡片

#### 步骤2: 点击"删除"
点击服务卡片下方的"删除"按钮

#### 步骤3: 确认删除
在弹出的确认对话框中点击"确定"完成删除

## 高级功能

### 请求头配置
某些MCP服务可能需要认证信息或其他自定义请求头：

#### 添加请求头
1. 在添加服务对话框中展开"高级配置"
2. 点击"添加请求头"按钮
3. 输入请求头的键和值
4. 可添加多个请求头

#### 示例场景
```json
{
  "Authorization": "Bearer your-access-token",
  "X-API-Key": "your-api-key",
  "User-Agent": "MCP-Manager/1.0"
}
```

### 超时设置
根据网络环境和MCP服务响应速度，可调整超时时间：
- 默认超时：60秒
- 建议范围：1-300秒
- 过短可能导致连接中断
- 过长可能影响用户体验

### 服务类型选择
- **SSE（推荐）**: 适用于支持Server-Sent Events的MCP服务
- **HTTP**: 适用于标准HTTP协议的MCP服务

## 常见使用场景

### 场景1: 添加本地开发的MCP服务
```
服务名称: local-dev-service
服务类型: SSE
服务URL: http://127.0.0.1:8081/sse/
超时时间: 30秒
```

### 场景2: 添加需要认证的远程服务
```
服务名称: production-api
服务类型: SSE
服务URL: https://api.yourcompany.com/mcp/sse/
超时时间: 120秒
请求头: 
  Authorization: Bearer your-production-token
  X-API-Version: v1
```

### 场景3: 添加HTTP协议的MCP服务
```
服务名称: legacy-service
服务类型: HTTP
服务URL: https://legacy.yourcompany.com/mcp/
超时时间: 60秒
```

## 故障排除

### 常见问题及解决方案

#### 1. 无法访问应用界面
**问题现象**: 浏览器提示"无法访问此网站"
**解决方案**:
- 检查应用是否已启动
- 确认端口8080未被占用
- 尝试使用其他端口启动：`java -Dserver.port=9090 -jar app.jar`

#### 2. 添加服务时提示"连接测试失败"
**问题现象**: 测试连接返回错误信息
**解决方案**:
- 检查服务URL是否正确
- 验证网络连通性
- 确认MCP服务是否正常运行
- 检查请求头配置是否正确

#### 3. 获取工具列表为空
**问题现象**: 工具列表显示"暂无工具信息"
**解决方案**:
- 确认MCP服务确实提供了工具
- 检查服务响应格式是否符合MCP标准
- 查看应用日志获取详细错误信息

#### 4. JSON格式错误
**问题现象**: JSON输入模式提示格式错误
**解决方案**:
- 使用JSON验证工具检查格式
- 确保所有字符串使用双引号
- 检查是否有遗漏的逗号或括号

### 日志查看
如需查看详细错误信息，可以查看控制台输出或日志文件。

## 最佳实践

### 服务命名规范
- 使用有意义的名称，如"用户管理系统"、"订单处理服务"
- 避免使用特殊字符和空格
- 保持名称简洁且具有描述性

### 安全建议
- 妥善保管包含敏感信息的配置
- 生产环境中使用HTTPS协议
- 定期更新认证令牌
- 限制应用的网络访问权限

### 性能优化
- 合理设置超时时间
- 避免添加过多同时连接的服务
- 定期清理不再使用的服务配置

### 备份策略
- 定期备份`mcp.db`数据库文件
- 导出重要服务配置为JSON格式保存

## 快捷操作

### 键盘快捷键
- **F5**: 刷新服务列表
- **Ctrl+N**: 快速打开添加服务对话框
- **Esc**: 关闭当前对话框

### 批量操作
目前版本支持单个服务操作，后续版本将支持：
- 批量导入服务配置
- 批量测试连接
- 批量导出工具信息

## 技术支持

### 获取帮助
如遇到问题，可通过以下方式获取帮助：
1. 查看应用日志文件
2. 参考开发文档和技术规范
3. 提交GitHub Issues
4. 联系技术支持团队

### 反馈建议
欢迎提出改进建议：
- 功能需求
- 界面优化
- 性能改进
- 用户体验提升

## 版本信息

### 当前版本
- **版本号**: 1.0.0
- **发布日期**: 2025年8月
- **支持协议**: MCP标准协议

### 更新日志
- **v1.0.0**: 初始版本，支持基本服务管理功能

### 升级说明
应用支持无缝升级，只需替换JAR文件并重启服务即可。

## 附录

### MCP协议简介
MCP（Model Context Protocol）是一种标准化协议，用于AI模型服务与客户端之间的交互，支持工具发现、调用和管理等功能。

### 支持的工具格式
1. 标准格式: `{ "tools": [...] }`
2. 结果包装格式: `{ "result": { "tools": [...] } }`
3. 数组格式: `[...]`
4. 数据包装格式: `{ "data": { "tools": [...] } }`

### JSON Schema说明
工具的输入输出参数使用JSON Schema定义，支持类型验证、格式约束等功能。
