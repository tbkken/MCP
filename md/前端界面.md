# MCP服务管理器前端界面文档

## 概述
前端界面采用Vue 3 + Element Plus构建的单页面应用程序，提供直观的用户界面用于管理MCP服务和查看工具信息。

## 技术栈
- **框架**: Vue 3 Composition API
- **UI库**: Element Plus
- **图标库**: Element Plus Icons
- **样式**: 原生CSS
- **HTTP客户端**: Fetch API

## 页面结构

### 主要组件
1. **头部区域**: 标题和新增服务按钮
2. **服务卡片列表**: 显示所有MCP服务的卡片视图
3. **添加服务对话框**: 用于添加新MCP服务
4. **工具查看对话框**: 显示服务提供的工具列表
5. **工具详情对话框**: 显示工具的详细信息
6. **删除确认对话框**: 确认删除操作

## 功能模块

### 1. 服务管理模块

#### 服务卡片展示
- **布局**: 响应式网格布局，自动适应屏幕大小
- **信息展示**:
  - 服务名称（标题）
  - 服务类型（SSE/HTTP）
  - 服务URL
  - 超时时间（如未设置显示"默认"）
  - 请求头信息（以标签形式展示）

#### 操作按钮
- **查看工具**: 打开工具查看对话框
- **删除**: 打开删除确认对话框

### 2. 添加服务模块

#### 对话框结构
采用Element Plus的Tabs组件，支持两种输入方式：

##### 表单输入模式
- **服务名称**: 文本输入框，必填
- **服务类型**: 下拉选择框（SSE/HTTP），默认SSE
- **服务URL**: 文本输入框，必填
- **高级配置**（折叠面板）:
  - 超时时间: 数字输入框，默认60秒
  - 请求头: 动态添加的键值对输入框

##### JSON输入模式
- **JSON编辑器**: 多行文本输入框
- **格式要求**: 完整的McpServer对象JSON格式
- **示例提示**: 提供标准JSON格式示例

#### 操作按钮
- **测试连接**: 验证服务配置的有效性
- **取消**: 关闭对话框
- **确定**: 保存服务配置

### 3. 工具查看模块

#### 工具列表展示
采用Element Plus表格组件：
- **工具名称**: 显示工具名称
- **描述**: 显示工具描述
- **操作列**: 查看详情按钮

#### 操作功能
- **查看详情**: 打开工具详情对话框
- **关闭**: 关闭对话框

### 4. 工具详情模块

#### 信息展示
采用Element Plus描述列表组件：
- **工具名称**: 工具名称
- **描述**: 工具详细描述
- **输入参数**: 格式化的JSON Schema
- **返回值**: 格式化的JSON对象

#### 显示优化
- **JSON格式化**: 使用`JSON.stringify(obj, null, 2)`美化显示
- **预格式化**: 使用`<pre>`标签保持格式

### 5. 删除确认模块
- **确认提示**: 显示要删除的服务名称
- **操作按钮**: 取消和确定删除

## 交互逻辑

### 页面加载流程
1. **组件挂载**: Vue组件初始化
2. **数据获取**: 调用`fetchServers()`获取所有MCP服务
3. **界面渲染**: 根据获取的数据渲染服务卡片

### 添加服务流程
1. **打开对话框**: 点击"新增MCP服务"按钮
2. **输入配置**: 选择输入模式并填写服务信息
3. **测试连接**: （可选）点击"测试连接"验证配置
4. **保存服务**: 点击"确定"发送POST请求
5. **刷新列表**: 保存成功后重新获取服务列表

### 查看工具流程
1. **发起请求**: 点击服务卡片的"查看工具"按钮
2. **获取数据**: 调用API获取工具列表
3. **显示对话框**: 渲染工具列表
4. **查看详情**: 点击"查看详情"显示工具详细信息

### 删除服务流程
1. **发起删除**: 点击服务卡片的"删除"按钮
2. **确认提示**: 显示删除确认对话框
3. **执行删除**: 点击"确定"发送DELETE请求
4. **刷新列表**: 删除成功后重新获取服务列表

## 样式设计

### 全局样式
```css
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
}
```

### 卡片样式
- **背景**: 白色背景
- **圆角**: 8px圆角
- **阴影**: 轻微阴影效果
- **内边距**: 20px

### 响应式设计
- **网格布局**: 使用CSS Grid实现响应式卡片布局
- **最小宽度**: 卡片最小宽度300px
- **自动填充**: 根据屏幕宽度自动调整列数

## 错误处理

### 用户反馈
使用Element Plus的Message组件提供用户反馈：
- **成功消息**: 绿色提示，如"连接测试成功"
- **警告消息**: 橙色提示，如"请填写必填字段"
- **错误消息**: 红色提示，如"获取MCP服务列表失败"

### 异常处理
- **网络错误**: 捕获fetch异常并显示错误消息
- **HTTP错误**: 根据响应状态码显示相应错误信息
- **JSON解析错误**: 捕获JSON解析异常并提示用户

## 数据绑定

### 响应式数据
```javascript
const mcpServers = ref([]);           // MCP服务列表
const addDialogVisible = ref(false);  // 添加对话框可见性
const newServer = reactive({          // 新服务表单数据
    name: '',
    type: 'sse',
    url: '',
    timeout: 60,
    headers: {}
});
```

### 计算属性
- **表单验证**: 动态检查必填字段
- **JSON解析**: 实时解析JSON输入

## API调用

### 核心方法
```javascript
// 获取所有MCP服务
const fetchServers = async () => {
    const response = await fetch('/api/mcp-servers');
    mcpServers.value = await response.json();
}

// 添加MCP服务
const addServer = async () => {
    const response = await fetch('/api/mcp-servers', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(serverData)
    });
}
```

### 请求处理
- **Content-Type**: 统一使用`application/json`
- **错误处理**: 检查response.ok状态
- **数据转换**: JSON序列化和反序列化

## 用户体验优化

### 加载状态
- **数据加载**: 页面初始化时自动加载服务列表
- **操作反馈**: 每个操作都有相应的成功或失败提示

### 输入便利性
- **默认值**: 为常用字段提供合理默认值
- **示例提示**: JSON输入模式提供格式示例
- **动态表单**: 请求头支持动态添加和删除

### 界面友好性
- **折叠面板**: 高级配置默认隐藏
- **标签页**: 支持表单和JSON两种输入方式
- **图标按钮**: 使用Element Plus图标增强视觉效果
